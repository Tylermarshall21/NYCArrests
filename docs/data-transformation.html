<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | NYC Arrests</title>
  <meta name="description" content="Chapter 3 Data transformation | NYC Arrests" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | NYC Arrests" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | NYC Arrests" />
  
  
  

<meta name="author" content="Ryan Rogers and Tyler Marshall" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYC Arrests</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview-of-analysis"><i class="fa fa-check"></i><b>1.1</b> Overview of analysis:</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#arrest-data"><i class="fa fa-check"></i><b>2.1</b> Arrest Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-sources.html"><a href="data-sources.html#arrest-data-acquisition"><i class="fa fa-check"></i><b>2.1.1</b> Arrest Data Acquisition</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-sources.html"><a href="data-sources.html#arrest-data-details"><i class="fa fa-check"></i><b>2.1.2</b> Arrest Data Details</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-sources.html"><a href="data-sources.html#arrest-data-issues"><i class="fa fa-check"></i><b>2.1.3</b> Arrest Data Issues</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#crime-data"><i class="fa fa-check"></i><b>2.2</b> Crime Data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-sources.html"><a href="data-sources.html#crime-data-acquisition"><i class="fa fa-check"></i><b>2.2.1</b> Crime Data Acquisition</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-sources.html"><a href="data-sources.html#crime-data-details"><i class="fa fa-check"></i><b>2.2.2</b> Crime Data Details</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-sources.html"><a href="data-sources.html#crime-data-issues"><i class="fa fa-check"></i><b>2.2.3</b> Crime Data Issues</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#weather-data"><i class="fa fa-check"></i><b>2.3</b> Weather Data</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-sources.html"><a href="data-sources.html#weather-data-acquisition"><i class="fa fa-check"></i><b>2.3.1</b> Weather Data Acquisition</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-sources.html"><a href="data-sources.html#weather-data-details"><i class="fa fa-check"></i><b>2.3.2</b> Weather Data Details</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-sources.html"><a href="data-sources.html#weather-data-issues"><i class="fa fa-check"></i><b>2.3.3</b> Weather Data Issues</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#arrest-data-1"><i class="fa fa-check"></i><b>3.1</b> Arrest Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-transformation.html"><a href="data-transformation.html#data-import---2021-data"><i class="fa fa-check"></i><b>3.1.1</b> Data Import - 2021 Data</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-transformation.html"><a href="data-transformation.html#data-import---2006-2021-data"><i class="fa fa-check"></i><b>3.1.2</b> Data Import - 2006-2021 Data</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-transformation.html"><a href="data-transformation.html#combining-old-and-new"><i class="fa fa-check"></i><b>3.1.3</b> Combining Old and New</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-transformation.html"><a href="data-transformation.html#aggregating-by-category"><i class="fa fa-check"></i><b>3.1.4</b> Aggregating by Category</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#crime-data-1"><i class="fa fa-check"></i><b>3.2</b> Crime Data</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#interactive-component"><i class="fa fa-check"></i><b>3.3</b> Interactive Component</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-transformation.html"><a href="data-transformation.html#top-100-days"><i class="fa fa-check"></i><b>3.3.1</b> Top 100 Days</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-transformation.html"><a href="data-transformation.html#weather-data-1"><i class="fa fa-check"></i><b>3.3.2</b> Weather Data</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-transformation.html"><a href="data-transformation.html#combining-weather-and-top-100"><i class="fa fa-check"></i><b>3.3.3</b> Combining Weather and Top 100</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#investigating-missing-values"><i class="fa fa-check"></i><b>4.1</b> Investigating Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#initial-exploration"><i class="fa fa-check"></i><b>5.1</b> Initial Exploration</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#arrests-compared-to-crime"><i class="fa fa-check"></i><b>5.2</b> Arrests Compared to Crime</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#arrests-related-to-marijuana-over-time"><i class="fa fa-check"></i><b>5.3</b> Arrests Related to Marijuana over time</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#arrests-near-elections"><i class="fa fa-check"></i><b>5.4</b> Arrests near Elections</a></li>
<li class="chapter" data-level="5.5" data-path="results.html"><a href="results.html#thanksgiving-day-parade---more-arrests-or-fewer"><i class="fa fa-check"></i><b>5.5</b> Thanksgiving Day Parade - More arrests, or fewer?</a></li>
<li class="chapter" data-level="5.6" data-path="results.html"><a href="results.html#have-drunk-driving-arrests-gone-down-recently"><i class="fa fa-check"></i><b>5.6</b> Have Drunk Driving Arrests Gone Down Recently</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component-1.html"><a href="interactive-component-1.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NYC Arrests</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<div id="arrest-data-1" class="section level2" number="3.1">
<h2><span class="header-section-number">3.1</span> Arrest Data</h2>
<div id="data-import---2021-data" class="section level3" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Data Import - 2021 Data</h3>
<p>We begin by importing our data source as-is. This will give us a starting point for our data adjustment and cleaning. We save this data as ‘nyc_arrests’.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="data-transformation.html#cb1-1" aria-hidden="true" tabindex="-1"></a>nyc_arrests <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://data.cityofnewyork.us/api/views/uip8-fykc/rows.csv?accessType=DOWNLOAD&quot;</span>,</span>
<span id="cb1-2"><a href="data-transformation.html#cb1-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">header=</span><span class="cn">TRUE</span>,</span>
<span id="cb1-3"><a href="data-transformation.html#cb1-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">sep=</span><span class="st">&quot;,&quot;</span>,</span>
<span id="cb1-4"><a href="data-transformation.html#cb1-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">quote=</span><span class="st">&#39;&quot;&#39;</span></span>
<span id="cb1-5"><a href="data-transformation.html#cb1-5" aria-hidden="true" tabindex="-1"></a>                          )</span></code></pre></div>
<p>For easier use of the dates associated with the arrests, we will convert these into R-compatible dates. We will also remove several columns not necessary for the analysis.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-transformation.html#cb2-1" aria-hidden="true" tabindex="-1"></a>nyc_arrests<span class="sc">$</span>ARREST_DATE <span class="ot">&lt;-</span> <span class="fu">as_date</span>(nyc_arrests<span class="sc">$</span>ARREST_DATE, <span class="at">format=</span><span class="st">&quot;%m/%d/%Y&quot;</span>)</span>
<span id="cb2-2"><a href="data-transformation.html#cb2-2" aria-hidden="true" tabindex="-1"></a>nyc_arrests <span class="ot">&lt;-</span> nyc_arrests <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(New.Georeferenced.Column, X_COORD_CD, Y_COORD_CD))</span></code></pre></div>
</div>
<div id="data-import---2006-2021-data" class="section level3" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Data Import - 2006-2021 Data</h3>
<p>We now repeat this transformation on our older data. We save this data as ‘nyc_arrests_old’. One issue with this dataset is its size. Weighing in at over one Gigabyte, this dataset in its unmodified form takes a very long time to download and modify. As a result, we have decided to utilize a reduced version of this dataset that only includes data starting in 2011. The transformations used to create this historical dataset are seen below, with the file specified being the file obtained from the source:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-transformation.html#cb3-1" aria-hidden="true" tabindex="-1"></a>nyc_arrests <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;D:/Documents/R Projects/Final Project Proposal/NYPD_Arrests_Data__Historic_.csv&quot;</span>,</span>
<span id="cb3-2"><a href="data-transformation.html#cb3-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">header=</span><span class="cn">TRUE</span>,</span>
<span id="cb3-3"><a href="data-transformation.html#cb3-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">sep=</span><span class="st">&quot;,&quot;</span>,</span>
<span id="cb3-4"><a href="data-transformation.html#cb3-4" aria-hidden="true" tabindex="-1"></a>                           <span class="at">quote=</span><span class="st">&#39;&quot;&#39;</span></span>
<span id="cb3-5"><a href="data-transformation.html#cb3-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb3-6"><a href="data-transformation.html#cb3-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-7"><a href="data-transformation.html#cb3-7" aria-hidden="true" tabindex="-1"></a>nyc_arrests <span class="ot">&lt;-</span> nyc_arrests <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(Lon_Lat, X_COORD_CD, Y_COORD_CD))</span>
<span id="cb3-8"><a href="data-transformation.html#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="data-transformation.html#cb3-9" aria-hidden="true" tabindex="-1"></a>nyc_arrests<span class="sc">$</span>ARREST_DATE <span class="ot">&lt;-</span> <span class="fu">as_date</span>(nyc_arrests<span class="sc">$</span>ARREST_DATE, <span class="at">format=</span><span class="st">&quot;%m/%d/%Y&quot;</span>)</span>
<span id="cb3-10"><a href="data-transformation.html#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="data-transformation.html#cb3-11" aria-hidden="true" tabindex="-1"></a>nyc_arrests <span class="ot">&lt;-</span> <span class="fu">filter</span>(nyc_arrests, ARREST_DATE <span class="sc">&gt;</span> <span class="st">&quot;2010-12-31&quot;</span>)</span>
<span id="cb3-12"><a href="data-transformation.html#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="data-transformation.html#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(nyc_arrests, <span class="at">file=</span><span class="st">&quot;nyc_arrests_post2010.csv&quot;</span>)</span></code></pre></div>
<p>We then run a matching set of data transformations.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-transformation.html#cb4-1" aria-hidden="true" tabindex="-1"></a>nyc_arrests_old <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;nyc_arrests_post2010.csv&quot;</span>,</span>
<span id="cb4-2"><a href="data-transformation.html#cb4-2" aria-hidden="true" tabindex="-1"></a>                          <span class="at">header=</span><span class="cn">TRUE</span>,</span>
<span id="cb4-3"><a href="data-transformation.html#cb4-3" aria-hidden="true" tabindex="-1"></a>                          <span class="at">sep=</span><span class="st">&quot;,&quot;</span>,</span>
<span id="cb4-4"><a href="data-transformation.html#cb4-4" aria-hidden="true" tabindex="-1"></a>                          <span class="at">quote=</span><span class="st">&#39;&quot;&#39;</span></span>
<span id="cb4-5"><a href="data-transformation.html#cb4-5" aria-hidden="true" tabindex="-1"></a>                          )</span>
<span id="cb4-6"><a href="data-transformation.html#cb4-6" aria-hidden="true" tabindex="-1"></a>nyc_arrests_old <span class="ot">&lt;-</span> nyc_arrests_old <span class="sc">%&gt;%</span> <span class="fu">select</span>(<span class="sc">-</span><span class="fu">c</span>(X))</span>
<span id="cb4-7"><a href="data-transformation.html#cb4-7" aria-hidden="true" tabindex="-1"></a>nyc_arrests_old<span class="sc">$</span>ARREST_DATE <span class="ot">&lt;-</span> <span class="fu">as_date</span>(nyc_arrests_old<span class="sc">$</span>ARREST_DATE, <span class="at">format=</span><span class="st">&quot;%Y-%m-%d&quot;</span>)</span></code></pre></div>
</div>
<div id="combining-old-and-new" class="section level3" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Combining Old and New</h3>
<p>For a lot of our analysis we will want a combined dataset, so we can append the historical data to the 2021 data like so:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="data-transformation.html#cb5-1" aria-hidden="true" tabindex="-1"></a>nyc_arrests_combined <span class="ot">&lt;-</span> <span class="fu">bind_rows</span>(nyc_arrests, nyc_arrests_old)</span></code></pre></div>
<p>This is the main dataset we will be using throughout our analysis, but for certain visualizations we will want our data by category of arrest. The transformation to get the data in that form is below.</p>
</div>
<div id="aggregating-by-category" class="section level3" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Aggregating by Category</h3>
<p>For many of our analyses, it is sensible to aggregate crime by its rough category, like so:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="data-transformation.html#cb6-1" aria-hidden="true" tabindex="-1"></a>nyc_arrests_by_category_year_boro <span class="ot">&lt;-</span> (</span>
<span id="cb6-2"><a href="data-transformation.html#cb6-2" aria-hidden="true" tabindex="-1"></a>  nyc_arrests_combined <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="data-transformation.html#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>(OFNS_DESC) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="data-transformation.html#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(OFNS_DESC <span class="sc">!=</span> <span class="st">&quot;&quot;</span>, ARREST_BORO <span class="sc">!=</span> <span class="st">&quot;&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-5"><a href="data-transformation.html#cb6-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">ARREST_YEAR =</span> <span class="fu">year</span>(ARREST_DATE)) <span class="sc">%&gt;%</span></span>
<span id="cb6-6"><a href="data-transformation.html#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(ARREST_YEAR, OFNS_DESC, ARREST_BORO) <span class="sc">%&gt;%</span></span>
<span id="cb6-7"><a href="data-transformation.html#cb6-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">COUNT_OF_ARRESTS =</span> <span class="fu">n</span>())</span>
<span id="cb6-8"><a href="data-transformation.html#cb6-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
</div>
<div id="crime-data-1" class="section level2" number="3.2">
<h2><span class="header-section-number">3.2</span> Crime Data</h2>
<p>The other dataset that we will be using in our analysis is a dataset looking at crime in New York. This dataset gives aggregated crime numbers for each New York county, and this data is from 2010-2020. We will be using this to compare to arrest levels in our analysis, so we did the following transformation below to get data by New York City borough.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="data-transformation.html#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Crime Data Import</span></span>
<span id="cb7-2"><a href="data-transformation.html#cb7-2" aria-hidden="true" tabindex="-1"></a>nyc_crime <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;https://data.ny.gov/api/views/ca8h-8gjq/rows.csv?accessType=DOWNLOAD&amp;sorting=true&quot;</span>,</span>
<span id="cb7-3"><a href="data-transformation.html#cb7-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">header=</span><span class="cn">TRUE</span>,</span>
<span id="cb7-4"><a href="data-transformation.html#cb7-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sep=</span><span class="st">&quot;,&quot;</span>,</span>
<span id="cb7-5"><a href="data-transformation.html#cb7-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">quote=</span><span class="st">&#39;&quot;&#39;</span></span>
<span id="cb7-6"><a href="data-transformation.html#cb7-6" aria-hidden="true" tabindex="-1"></a>                        )</span>
<span id="cb7-7"><a href="data-transformation.html#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="data-transformation.html#cb7-8" aria-hidden="true" tabindex="-1"></a>nyc_crime <span class="ot">&lt;-</span> (</span>
<span id="cb7-9"><a href="data-transformation.html#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(nyc_crime, Region <span class="sc">==</span> <span class="st">&quot;New York City&quot;</span>, Year <span class="sc">&gt;</span> <span class="dv">2010</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="data-transformation.html#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(<span class="fu">c</span>(County, Year, Murder, Rape, Aggravated.Assault, Motor.Vehicle.Theft)) <span class="sc">%&gt;%</span></span>
<span id="cb7-11"><a href="data-transformation.html#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Category =</span> <span class="st">&quot;Crime Reports&quot;</span>)</span>
<span id="cb7-12"><a href="data-transformation.html#cb7-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
</div>
<div id="interactive-component" class="section level2" number="3.3">
<h2><span class="header-section-number">3.3</span> Interactive Component</h2>
<p>Some data was assembled and formatted for use in our interactive visual. This included a list of the top 100 days with the most arrests and weather in NYC.</p>
<div id="top-100-days" class="section level3" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> Top 100 Days</h3>
<p>First, we assembled the top 100 days with the highest arrests and stored this as a dataframe.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-transformation.html#cb8-1" aria-hidden="true" tabindex="-1"></a>nyc_arrest_top_hundred <span class="ot">&lt;-</span> nyc_arrests_combined <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="data-transformation.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weekday =</span> <span class="fu">wday</span>(ARREST_DATE)) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="data-transformation.html#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ARREST_DATE, Weekday) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="data-transformation.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Number_Arrests =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb8-5"><a href="data-transformation.html#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb8-6"><a href="data-transformation.html#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Number_Arrests)) <span class="sc">%&gt;%</span></span>
<span id="cb8-7"><a href="data-transformation.html#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ARREST_YEAR =</span> <span class="fu">year</span>(ARREST_DATE),</span>
<span id="cb8-8"><a href="data-transformation.html#cb8-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">ARREST_MONTH =</span> <span class="fu">month</span>(ARREST_DATE),</span>
<span id="cb8-9"><a href="data-transformation.html#cb8-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">ARREST_MONTH_TEXT =</span> <span class="fu">month</span>(ARREST_DATE)) <span class="sc">%&gt;%</span></span>
<span id="cb8-10"><a href="data-transformation.html#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>)</span>
<span id="cb8-11"><a href="data-transformation.html#cb8-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-12"><a href="data-transformation.html#cb8-12" aria-hidden="true" tabindex="-1"></a>nyc_arrest_top_hundred<span class="sc">$</span>Weekday <span class="ot">&lt;-</span> <span class="fu">factor</span>(nyc_arrest_top_hundred<span class="sc">$</span>Weekday,</span>
<span id="cb8-13"><a href="data-transformation.html#cb8-13" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">levels=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>),</span>
<span id="cb8-14"><a href="data-transformation.html#cb8-14" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;Sunday&quot;</span>, <span class="st">&quot;Monday&quot;</span>, <span class="st">&quot;Tuesday&quot;</span>, <span class="st">&quot;Wednesday&quot;</span>, <span class="st">&quot;Thursday&quot;</span>,<span class="st">&quot;Friday&quot;</span>,<span class="st">&quot;Saturday&quot;</span>)</span>
<span id="cb8-15"><a href="data-transformation.html#cb8-15" aria-hidden="true" tabindex="-1"></a>                                     )</span>
<span id="cb8-16"><a href="data-transformation.html#cb8-16" aria-hidden="true" tabindex="-1"></a>nyc_arrest_top_hundred<span class="sc">$</span>ARREST_MONTH_TEXT <span class="ot">&lt;-</span> <span class="fu">factor</span>(nyc_arrest_top_hundred<span class="sc">$</span>ARREST_MONTH_TEXT,</span>
<span id="cb8-17"><a href="data-transformation.html#cb8-17" aria-hidden="true" tabindex="-1"></a>                                                   <span class="at">levels=</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>,<span class="dv">11</span>,<span class="dv">12</span>),</span>
<span id="cb8-18"><a href="data-transformation.html#cb8-18" aria-hidden="true" tabindex="-1"></a>                                                   <span class="at">labels=</span><span class="fu">c</span>(<span class="st">&quot;January&quot;</span>,</span>
<span id="cb8-19"><a href="data-transformation.html#cb8-19" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;February&quot;</span>,</span>
<span id="cb8-20"><a href="data-transformation.html#cb8-20" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;March&quot;</span>,</span>
<span id="cb8-21"><a href="data-transformation.html#cb8-21" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;April&quot;</span>,</span>
<span id="cb8-22"><a href="data-transformation.html#cb8-22" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;May&quot;</span>,</span>
<span id="cb8-23"><a href="data-transformation.html#cb8-23" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;June&quot;</span>,</span>
<span id="cb8-24"><a href="data-transformation.html#cb8-24" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;July&quot;</span>,</span>
<span id="cb8-25"><a href="data-transformation.html#cb8-25" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;August&quot;</span>,</span>
<span id="cb8-26"><a href="data-transformation.html#cb8-26" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;September&quot;</span>,</span>
<span id="cb8-27"><a href="data-transformation.html#cb8-27" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;October&quot;</span>,</span>
<span id="cb8-28"><a href="data-transformation.html#cb8-28" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;November&quot;</span>,</span>
<span id="cb8-29"><a href="data-transformation.html#cb8-29" aria-hidden="true" tabindex="-1"></a>                                                            <span class="st">&quot;December&quot;</span>)</span>
<span id="cb8-30"><a href="data-transformation.html#cb8-30" aria-hidden="true" tabindex="-1"></a>                                                   )</span></code></pre></div>
</div>
<div id="weather-data-1" class="section level3" number="3.3.2">
<h3><span class="header-section-number">3.3.2</span> Weather Data</h3>
<p>Our weather data was stored in csv files, which we then transformed to form a cleaner data set. In our original dataset, there were some values marked as T, representing precipitation less than 0.01 inches. For the sake of simplicity, we translated ‘Trace’ precipitation as 0.001. This will show that there was precipitation less than the threshold of 0.01, while not overstating the quantity of rain. For our uses, this will not make the data misleading when presented. On days where equipment malfunctioned, we set the value to NA.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-transformation.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Precipitation Data Import</span></span>
<span id="cb9-2"><a href="data-transformation.html#cb9-2" aria-hidden="true" tabindex="-1"></a>nyc_weather <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;./Precip_Data.csv&quot;</span>,</span>
<span id="cb9-3"><a href="data-transformation.html#cb9-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">header=</span><span class="cn">TRUE</span>,</span>
<span id="cb9-4"><a href="data-transformation.html#cb9-4" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sep=</span><span class="st">&quot;,&quot;</span>,</span>
<span id="cb9-5"><a href="data-transformation.html#cb9-5" aria-hidden="true" tabindex="-1"></a>                        <span class="at">quote=</span><span class="st">&#39;&quot;&#39;</span></span>
<span id="cb9-6"><a href="data-transformation.html#cb9-6" aria-hidden="true" tabindex="-1"></a>                        )</span>
<span id="cb9-7"><a href="data-transformation.html#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="data-transformation.html#cb9-8" aria-hidden="true" tabindex="-1"></a>nyc_weather <span class="ot">&lt;-</span> (</span>
<span id="cb9-9"><a href="data-transformation.html#cb9-9" aria-hidden="true" tabindex="-1"></a>  nyc_weather <span class="sc">%&gt;%</span></span>
<span id="cb9-10"><a href="data-transformation.html#cb9-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">!</span>Day,</span>
<span id="cb9-11"><a href="data-transformation.html#cb9-11" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;Month&quot;</span>,</span>
<span id="cb9-12"><a href="data-transformation.html#cb9-12" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;Precipitation&quot;</span></span>
<span id="cb9-13"><a href="data-transformation.html#cb9-13" aria-hidden="true" tabindex="-1"></a>                 ) <span class="sc">%&gt;%</span></span>
<span id="cb9-14"><a href="data-transformation.html#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unite</span>(Date, <span class="fu">c</span>(Month, Day))</span>
<span id="cb9-15"><a href="data-transformation.html#cb9-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-16"><a href="data-transformation.html#cb9-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-17"><a href="data-transformation.html#cb9-17" aria-hidden="true" tabindex="-1"></a>nyc_weather<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as_date</span>(nyc_weather<span class="sc">$</span>Date, <span class="at">format=</span><span class="st">&quot;%b.%y_%d&quot;</span>)</span>
<span id="cb9-18"><a href="data-transformation.html#cb9-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-19"><a href="data-transformation.html#cb9-19" aria-hidden="true" tabindex="-1"></a>nyc_temp <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">&quot;./Temp_Data.csv&quot;</span>,</span>
<span id="cb9-20"><a href="data-transformation.html#cb9-20" aria-hidden="true" tabindex="-1"></a>                        <span class="at">header=</span><span class="cn">TRUE</span>,</span>
<span id="cb9-21"><a href="data-transformation.html#cb9-21" aria-hidden="true" tabindex="-1"></a>                        <span class="at">sep=</span><span class="st">&quot;,&quot;</span>,</span>
<span id="cb9-22"><a href="data-transformation.html#cb9-22" aria-hidden="true" tabindex="-1"></a>                        <span class="at">quote=</span><span class="st">&#39;&quot;&#39;</span></span>
<span id="cb9-23"><a href="data-transformation.html#cb9-23" aria-hidden="true" tabindex="-1"></a>                        )</span>
<span id="cb9-24"><a href="data-transformation.html#cb9-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-25"><a href="data-transformation.html#cb9-25" aria-hidden="true" tabindex="-1"></a>nyc_temp <span class="ot">&lt;-</span> (</span>
<span id="cb9-26"><a href="data-transformation.html#cb9-26" aria-hidden="true" tabindex="-1"></a>  nyc_temp <span class="sc">%&gt;%</span></span>
<span id="cb9-27"><a href="data-transformation.html#cb9-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="sc">!</span>Day,</span>
<span id="cb9-28"><a href="data-transformation.html#cb9-28" aria-hidden="true" tabindex="-1"></a>                 <span class="at">names_to =</span> <span class="st">&quot;Month&quot;</span>,</span>
<span id="cb9-29"><a href="data-transformation.html#cb9-29" aria-hidden="true" tabindex="-1"></a>                 <span class="at">values_to =</span> <span class="st">&quot;Mean_Temperature&quot;</span></span>
<span id="cb9-30"><a href="data-transformation.html#cb9-30" aria-hidden="true" tabindex="-1"></a>                 ) <span class="sc">%&gt;%</span></span>
<span id="cb9-31"><a href="data-transformation.html#cb9-31" aria-hidden="true" tabindex="-1"></a>    <span class="fu">unite</span>(Date, <span class="fu">c</span>(Month, Day))</span>
<span id="cb9-32"><a href="data-transformation.html#cb9-32" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-33"><a href="data-transformation.html#cb9-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-34"><a href="data-transformation.html#cb9-34" aria-hidden="true" tabindex="-1"></a>nyc_temp<span class="sc">$</span>Date <span class="ot">&lt;-</span> <span class="fu">as_date</span>(nyc_temp<span class="sc">$</span>Date, <span class="at">format=</span><span class="st">&quot;%b.%y_%d&quot;</span>)</span>
<span id="cb9-35"><a href="data-transformation.html#cb9-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-36"><a href="data-transformation.html#cb9-36" aria-hidden="true" tabindex="-1"></a>nyc_weather <span class="ot">&lt;-</span> <span class="fu">full_join</span>(nyc_weather, nyc_temp)</span></code></pre></div>
</div>
<div id="combining-weather-and-top-100" class="section level3" number="3.3.3">
<h3><span class="header-section-number">3.3.3</span> Combining Weather and Top 100</h3>
<p>A simple join combines the two datasets, which are then stored as a file.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb10-1"><a href="data-transformation.html#cb10-1" aria-hidden="true" tabindex="-1"></a>combined_hundred <span class="ot">&lt;-</span> <span class="fu">left_join</span>(nyc_arrest_top_hundred, nyc_weather, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;ARREST_DATE&quot;</span> <span class="ot">=</span> <span class="st">&quot;Date&quot;</span>))</span>
<span id="cb10-2"><a href="data-transformation.html#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="data-transformation.html#cb10-3" aria-hidden="true" tabindex="-1"></a>combined_hundred<span class="sc">$</span>Ranking <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(combined_hundred)</span>
<span id="cb10-4"><a href="data-transformation.html#cb10-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-5"><a href="data-transformation.html#cb10-5" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(combined_hundred, <span class="at">file=</span><span class="st">&quot;interactive_testing/tophundred.csv&quot;</span>)</span></code></pre></div>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Tylermarshall21/NYCArrests/edit/main/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/Tylermarhall21/NYCArrests/blob/main/03-cleaning.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
