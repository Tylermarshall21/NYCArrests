<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Interactive component | NYC Arrests</title>
  <meta name="description" content="Chapter 6 Interactive component | NYC Arrests" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Interactive component | NYC Arrests" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Interactive component | NYC Arrests" />
  
  
  

<meta name="author" content="Ryan Rogers and Tyler Marshall" />


<meta name="date" content="2021-12-13" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="results.html"/>
<link rel="next" href="conclusion.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYC Arrests</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#overview-of-analysis"><i class="fa fa-check"></i><b>1.1</b> Overview of analysis:</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a>
<ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#arrest-data"><i class="fa fa-check"></i><b>2.1</b> Arrest Data</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="data-sources.html"><a href="data-sources.html#arrest-data-acquisition"><i class="fa fa-check"></i><b>2.1.1</b> Arrest Data Acquisition</a></li>
<li class="chapter" data-level="2.1.2" data-path="data-sources.html"><a href="data-sources.html#arrest-data-details"><i class="fa fa-check"></i><b>2.1.2</b> Arrest Data Details</a></li>
<li class="chapter" data-level="2.1.3" data-path="data-sources.html"><a href="data-sources.html#arrest-data-issues"><i class="fa fa-check"></i><b>2.1.3</b> Arrest Data Issues</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#crime-data"><i class="fa fa-check"></i><b>2.2</b> Crime Data</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="data-sources.html"><a href="data-sources.html#crime-data-acquisition"><i class="fa fa-check"></i><b>2.2.1</b> Crime Data Acquisition</a></li>
<li class="chapter" data-level="2.2.2" data-path="data-sources.html"><a href="data-sources.html#crime-data-details"><i class="fa fa-check"></i><b>2.2.2</b> Crime Data Details</a></li>
<li class="chapter" data-level="2.2.3" data-path="data-sources.html"><a href="data-sources.html#crime-data-issues"><i class="fa fa-check"></i><b>2.2.3</b> Crime Data Issues</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#weather-data"><i class="fa fa-check"></i><b>2.3</b> Weather Data</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="data-sources.html"><a href="data-sources.html#weather-data-acquisition"><i class="fa fa-check"></i><b>2.3.1</b> Weather Data Acquisition</a></li>
<li class="chapter" data-level="2.3.2" data-path="data-sources.html"><a href="data-sources.html#weather-data-details"><i class="fa fa-check"></i><b>2.3.2</b> Weather Data Details</a></li>
<li class="chapter" data-level="2.3.3" data-path="data-sources.html"><a href="data-sources.html#weather-data-issues"><i class="fa fa-check"></i><b>2.3.3</b> Weather Data Issues</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#arrest-data-1"><i class="fa fa-check"></i><b>3.1</b> Arrest Data</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data-transformation.html"><a href="data-transformation.html#data-import---2021-data"><i class="fa fa-check"></i><b>3.1.1</b> Data Import - 2021 Data</a></li>
<li class="chapter" data-level="3.1.2" data-path="data-transformation.html"><a href="data-transformation.html#data-import---2006-2021-data"><i class="fa fa-check"></i><b>3.1.2</b> Data Import - 2006-2021 Data</a></li>
<li class="chapter" data-level="3.1.3" data-path="data-transformation.html"><a href="data-transformation.html#combining-old-and-new"><i class="fa fa-check"></i><b>3.1.3</b> Combining Old and New</a></li>
<li class="chapter" data-level="3.1.4" data-path="data-transformation.html"><a href="data-transformation.html#aggregating-by-category"><i class="fa fa-check"></i><b>3.1.4</b> Aggregating by Category</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#crime-data-1"><i class="fa fa-check"></i><b>3.2</b> Crime Data</a></li>
<li class="chapter" data-level="3.3" data-path="data-transformation.html"><a href="data-transformation.html#interactive-component"><i class="fa fa-check"></i><b>3.3</b> Interactive Component</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="data-transformation.html"><a href="data-transformation.html#top-100-days"><i class="fa fa-check"></i><b>3.3.1</b> Top 100 Days</a></li>
<li class="chapter" data-level="3.3.2" data-path="data-transformation.html"><a href="data-transformation.html#weather-data-1"><i class="fa fa-check"></i><b>3.3.2</b> Weather Data</a></li>
<li class="chapter" data-level="3.3.3" data-path="data-transformation.html"><a href="data-transformation.html#combining-weather-and-top-100"><i class="fa fa-check"></i><b>3.3.3</b> Combining Weather and Top 100</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a>
<ul>
<li class="chapter" data-level="4.1" data-path="missing-values.html"><a href="missing-values.html#investigating-missing-values"><i class="fa fa-check"></i><b>4.1</b> Investigating Missing Values</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a>
<ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#initial-exploration"><i class="fa fa-check"></i><b>5.1</b> Initial Exploration</a></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#arrests-compared-to-crime"><i class="fa fa-check"></i><b>5.2</b> Arrests Compared to Crime</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#arrests-related-to-marijuana-over-time"><i class="fa fa-check"></i><b>5.3</b> Arrests Related to Marijuana over time</a></li>
<li class="chapter" data-level="5.4" data-path="results.html"><a href="results.html#arrests-near-elections"><i class="fa fa-check"></i><b>5.4</b> Arrests near Elections</a></li>
<li class="chapter" data-level="5.5" data-path="results.html"><a href="results.html#thanksgiving-day-parade---more-arrests-or-fewer"><i class="fa fa-check"></i><b>5.5</b> Thanksgiving Day Parade - More arrests, or fewer?</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="results.html"><a href="results.html#a-note-on-reproducibility"><i class="fa fa-check"></i><b>5.5.1</b> A Note on Reproducibility</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="results.html"><a href="results.html#have-drunk-driving-arrests-gone-down-recently"><i class="fa fa-check"></i><b>5.6</b> Have Drunk Driving Arrests Gone Down Recently?</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component-1.html"><a href="interactive-component-1.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a>
<ul>
<li class="chapter" data-level="7.1" data-path="conclusion.html"><a href="conclusion.html#analysis-limitations"><i class="fa fa-check"></i><b>7.1</b> Analysis Limitations</a></li>
<li class="chapter" data-level="7.2" data-path="conclusion.html"><a href="conclusion.html#lessons-learned"><i class="fa fa-check"></i><b>7.2</b> Lessons Learned</a></li>
<li class="chapter" data-level="7.3" data-path="conclusion.html"><a href="conclusion.html#future-direction"><i class="fa fa-check"></i><b>7.3</b> Future Direction</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NYC Arrests</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="interactive-component-1" class="section level1" number="6">
<h1><span class="header-section-number">Chapter 6</span> Interactive component</h1>
<p>For our interactive component, we have provided an exercise to test both your intuition and you understanding of our results. We have collected the top 100 days in arrests since 2011, and ranked them in order from most arrests to least. Can you determine the details of the number 1 date in arrests? Begin by selecting an answer to one of the white answer boxes below.</p>
<script src="https://d3js.org/d3.v7.js"></script>
<script>
  
  // Setup and other initialization
  
  var w = 1500;
  var h = 700;
  
  var barchartMargin = {top: 50, right: 700, bottom: 50, left: 50};
  var barchartWidth = w - barchartMargin.left - barchartMargin.right;
  var barchartHeight = h - barchartMargin.top - barchartMargin.bottom;
  var dur = 500;
  
  var questionMargin = {top: 50, right: 50, bottom: 50, left: 750};
  var questionWidth = w - questionMargin.left - questionMargin.right;
  var questionHeight = h - questionMargin.top - questionMargin.bottom;

  // Initialize SVG and Background

  var svg = d3.select("body").select("div:nth-child(2)").select("div").select("div.page-wrapper")
    .append("svg")
    .attr("width", w)
    .attr("height", h);

  svg.append("rect")
      .attr("x", 0)
      .attr("y", 0)
      .attr("width", w)
      .attr("height", h)
      .attr("fill", "lightgray");
      
  // Initialize Scales and Axes in Global
  
  var xScale = d3.scaleLinear()
    .range([0, barchartWidth]);
  var yScale = d3.scaleBand()
    .range([0, barchartHeight])
    .paddingInner(.1);
  
  var xAxis = d3.axisBottom()
    .scale(xScale);
  var yAxis = d3.axisLeft()
    .scale(yScale);
    
  var chartTitle = svg.append("g")
    .attr("id", "chartTitles")
    .attr("transform", `translate (${barchartWidth / 2}, ${barchartMargin.top / 1.5}) scale(1.5)`)
    .append("text")
    .attr('text-anchor', 'middle')
    .text("Days with Highest Arrests - 2011-2021")
    
  var questionTitle = svg.append("g")
    .attr("id", "qTitles")
    .attr("transform", `translate (${barchartWidth + (questionWidth / 2)}, ${questionMargin.top / 1.5}) scale(1.5)`)
    .append("text")
    .attr('text-anchor', 'middle')
    .text("Questions")
  
  var xLabel = svg.append("g")
    .attr("id", "xLabs")
    .attr("transform", `translate (${barchartWidth / 2}, ${h - barchartMargin.bottom / 3})`)
    .append("text")
    .attr('text-anchor', 'middle')
    .text("Arrest Count")
  
  var yLabel = svg.append("g")
    .attr("id", "yLabs")
    .attr("transform", `translate (${barchartMargin.left / 2}, ${h / 2})`)
    .append("text")
    .attr('text-anchor', 'middle')
    .attr("transform", 'rotate(-90)')
    .text("Ranking")
  
  // Arrest Initial Questions
  
  var question = svg.append("g")
      .attr("id", "question")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", barchartMargin.top + 20)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 5)
      .attr("fill","ivory");
                        
    svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 50)
      .text("Which day of the week do you think sees the most arrests?");
  svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 110)
      .text("Fun Fact: Only one day in the top 100 does not fall on one of these weekdays!");
  svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 130)
      .text("It is Saturday, April 2nd, 2011, ranked 58th.");
  
  var q1answers = ["Tuesday","Wednesday","Thursday","Friday"]
    .map((value, key) => ({key, value}))
    
  var arrestQuestions = svg.append("g")
      .attr("id", "question_panels")
      .selectAll("rect")
      .data(q1answers, d => d.key)
      .enter()
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 10)
      .attr("fill","white")
      .attr("text",d => d.value)
      .on("click", function ()
                    {
                        question1update(d3.select(this).attr("text"))
                        });
                        
    svg.select("g#question_panels")
            .selectAll("text")
      .data(q1answers, d => d.key)
      .enter()
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + (questionWidth - 100)/2)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100 + (questionHeight / 20))
      .text(d => d.value);  
  
  
  // Initialize Row Converter Function

  var rowConverter = function (d) {
    return {
      key: +d.Ranking,
      date: d.ARREST_DATE,
      weekday: d.Weekday,
      arrest_count: +d.Number_Arrests,
      year: d.ARREST_YEAR,
      month_num: +d.ARREST_MONTH,
      month_text: d.ARREST_MONTH_TEXT,
      precip: +d.Precipitation,
      temp: +d.Mean_Temperature,
    }
    
  };

  // Data Import Function

  d3.csv("https://raw.githubusercontent.com/Tylermarshall21/NYCArrests/main/interactive_testing/tophundred.csv", rowConverter)
  .then(function(arrestdata) {
    
    // Initialize Barchart Scale, Axes
    
    var xScale = d3.scaleLinear()
      .domain([0, 1750 /*d3.max(arrestdata, d => d.arrest_count)*/])
      .range([0, barchartWidth]);
      
    var yScale = d3.scaleBand()
      .domain(d3.range(1,arrestdata.length+1))
      .range([0, barchartHeight])
      .paddingInner(.1);
    
    var xAxis = d3.axisBottom()
      .scale(xScale);
      
    var yAxis = d3.axisLeft()
      .scale(yScale);
      
    // Create Bars
    
    var arrestBars = svg.append("g")
      .attr("id", "bars")
      .selectAll("rect")
      .data(arrestdata, d => d.key);
    
    arrestBars
      .enter()
      .append("rect")
      .attr("x", d => 0 + barchartMargin.left)
      .attr("y", (d, i) => yScale(d.key) + barchartMargin.top)
      .attr("width", d => xScale(d.arrest_count))
      .attr("height", yScale.bandwidth())
      .attr("fill","green")
      .text(d => `key: ${d.key}`);
    
    svg.append("g")
      .attr("class", "xAxis")
      .attr("transform", `translate (${barchartMargin.left}, ${h - barchartMargin.bottom})`)
      .call(xAxis);
      
    svg.append("g")
      .attr("class", "yAxis")
      .attr("transform", `translate (${barchartMargin.left}, ${barchartMargin.top})`)
      .call(yAxis);

    console.log("Nothing to see here!")    

  })
  .catch(function(error) {
    // error handling
    console.log("Something Wrong Here...")
  
  });

  

  // Update Function

  function update(arrestdata) {
    
    console.log(arrestdata.length)

    xScale.domain([0, 1750 /*d3.max(arrestdata, d => d.arrest_count)*/]);

    yScale.domain(d3.range(d3.min(arrestdata, d => d.key),d3.max(arrestdata, d => d.key)+1));

    var arrestBars = d3.select("g#bars")
                .selectAll("rect")
                .data(arrestdata, d => d.key)
                .text(d => `key: ${d.key}`);

    arrestBars
      .enter()
        .append("rect")
        .attr("x", d => 0 + barchartMargin.left)
        .attr("y", (d, i) => yScale(d.key) + barchartMargin.top)
        .attr("width", d => xScale(d.arrest_count))
        .attr("height", yScale.bandwidth())
        .text(d => `key: ${d.key}`)
      .merge(arrestBars)
        .transition()
        .duration(dur)
        .transition()
        .duration(dur)
        .ease(d3.easeLinear)
        .attr("x", d => 0 + barchartMargin.left)
        .attr("y", (d, i) => yScale(d.key) + barchartMargin.top)
        .attr("width", d => xScale(d.arrest_count))
        .attr("height", yScale.bandwidth())
        .text(d => `key: ${d.key}`);

    arrestBars.exit()
      .transition()
        .duration(dur)
        .attr("fill", "red")
        .attr("width", d => 0)
        .remove();

    svg.select(".xAxis")
      .transition()
        .duration(dur)
        .transition()
        .duration(dur)
        .ease(d3.easeLinear)
        .call(xAxis);

    svg.select(".yAxis")
      .transition()
        .duration(dur)
        .transition()
        .duration(dur)
        .ease(d3.easeLinear)
        .call(yAxis);

  }

  function question1update(weekday){
    console.log(weekday)
    
            var arrestBars = d3.select("g#bars")
            .selectAll("rect");

            var newarrestdata = arrestBars
                .data().filter(d => d.weekday == weekday);

                update(newarrestdata)
                if(newarrestdata.length == 0){
                  gameover(newarrestdata)
                }else{
                  createq2()
                }
        };
        
    function question2update(year){
    console.log(year)
    
            var arrestBars = d3.select("g#bars")
            .selectAll("rect");
            
            console.log(arrestBars.data())

            var newarrestdata = arrestBars
                .data().filter(d => d.year == year);
                
                update(newarrestdata)
                if(newarrestdata.length == 0){
                  gameover(newarrestdata)
                }else{
                createq3()
                }
        };
        
    function question3update(month_num){
    console.log(month_num)
    
            var arrestBars = d3.select("g#bars")
            .selectAll("rect");
            
            console.log(arrestBars.data())

            var newarrestdata = arrestBars
                .data().filter(d => (d.month_num <= month_num & d.month_num > month_num-3));
                
                update(newarrestdata)
                if(newarrestdata.length == 0){
                  gameover(newarrestdata)
                }else{
                createq4()
                }
        };
        
    function question4update(precip_thresh){
    console.log(precip_thresh)
    
            var arrestBars = d3.select("g#bars")
            .selectAll("rect");
            
            console.log(arrestBars.data())

            if(precip_thresh == 0.002){
             var newarrestdata = arrestBars
                .data().filter(d => d.precip >= precip_thresh);
            }else{
              var newarrestdata = arrestBars
                .data().filter(d => d.precip == precip_thresh);
            }
                
                update(newarrestdata)
                if(newarrestdata.length == 0){
                  gameover(newarrestdata)
                }else{
                createq5()
                }
        };
    
    function question5update(t_f){
    console.log(t_f)
    
            var arrestBars = d3.select("g#bars")
            .selectAll("rect");
            
            var best = arrestBars.data()[0].key
            var worst = arrestBars.data()[arrestBars.data().length - 1].key
            
            console.log(arrestBars.data())

            if(t_f == 0){
             var newarrestdata = arrestBars
                .data().filter(d => d.key == best);
            }else{
              var newarrestdata = arrestBars
                .data().filter(d => d.key == worst);
            }
                
                update(newarrestdata)
                gameover(newarrestdata)
        };
        
    function createq2(){
          
          // Arrest Second Round Questions
          
          svg.select("g#question").selectAll("text").remove();
          svg.select("g#question").selectAll("rect").remove();

          svg.select("g#question_panels").selectAll("rect").remove();
          svg.select("g#question_panels").selectAll("text").remove();

  
  var question = svg.select("g#question")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", barchartMargin.top + 20)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 5)
      .attr("fill","ivory");
                        
    svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 50)
      .text("In which year do you think the highest arrest day is located?");
  svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 110)
      .text("Looking for other years? Believe it or not, none of them are represented in the top 100!");
  
  var q2answers = ["2011","2012","2013","2014"]
    .map((value, key) => ({key, value}))
    
  var arrestQuestions = svg.select("g#question_panels")
      .selectAll("rect")
      .data(q2answers, d => d.key)
      .enter()
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 10)
      .attr("fill","white")
      .attr("text",d => d.value)
      .on("click", function ()
                    {
                        question2update(d3.select(this).attr("text"))
                        });
                        
    svg.select("g#question_panels")
            .selectAll("text")
      .data(q2answers, d => d.key)
      .enter()
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + (questionWidth - 100)/2)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100 + (questionHeight / 20))
      .text(d => d.value);
            
        };
        
    function createq3(){
          
          // Arrest Third Round Questions
          
          svg.select("g#question").selectAll("text").remove();
          svg.select("g#question").selectAll("rect").remove();

          svg.select("g#question_panels").selectAll("rect").remove();
          svg.select("g#question_panels").selectAll("text").remove();

  
  var question = svg.select("g#question")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", barchartMargin.top + 20)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 5)
      .attr("fill","ivory");
                        
    svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 50)
      .text("In which months do your think the highest arrest days occurred?");
  svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 110)
      .text("Here's a hint, which month is it definitely not?");
  
  var q3answers = [{key:3, value:"January, February, March"},
                    {key:6, value:"April, May, June"},
                    {key:9, value:"July, August, September"},
                    {key:12, value:"October, November,December"}]
    
  var arrestQuestions = svg.select("g#question_panels")
      .selectAll("rect")
      .data(q3answers, d => d.key)
      .enter()
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 10)
      .attr("fill","white")
      .attr("text",d => d.value)
      .attr("key", d=> d.key)
      .on("click", function ()
                    {
                        question3update(d3.select(this).attr("key"))
                        });
                        
    svg.select("g#question_panels")
            .selectAll("text")
      .data(q3answers, d => d.key)
      .enter()
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + (questionWidth - 100)/2)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100 + (questionHeight / 20))
      .text(d => d.value);
            
        };

  function createq4(){
          
          // Arrest Fourth Round Questions
          
          svg.select("g#question").selectAll("text").remove();
          svg.select("g#question").selectAll("rect").remove();

          svg.select("g#question_panels").selectAll("rect").remove();
          svg.select("g#question_panels").selectAll("text").remove();

  
  var question = svg.select("g#question")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", barchartMargin.top + 20)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 5)
      .attr("fill","ivory");
                        
    svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 50)
      .text("On the days with the most arrests, what was the weather like?");
  svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 110)
      .text("Hint: Use your intuition!");
  
  var q4answers = [{key:0.00, value:"No precipitation"},
                    {key:0.001, value:"Trace amounts of precipitation"},
                    {key:0.002, value:"Precipitation greater than trace amounts"}]
    
  var arrestQuestions = svg.select("g#question_panels")
      .selectAll("rect")
      .data(q4answers, d => d.key)
      .enter()
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 10)
      .attr("fill","white")
      .attr("text",d => d.value)
      .attr("key", d=> d.key)
      .on("click", function ()
                    {
                        question4update(d3.select(this).attr("key"))
                        });
                        
    svg.select("g#question_panels")
            .selectAll("text")
      .data(q4answers, d => d.key)
      .enter()
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + (questionWidth - 100)/2)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100 + (questionHeight / 20))
      .text(d => d.value);
            
        };
        
  function createq5(){
          
          // Arrest Fifth Round Questions
          
          svg.select("g#question").selectAll("text").remove();
          svg.select("g#question").selectAll("rect").remove();

          svg.select("g#question_panels").selectAll("rect").remove();
          svg.select("g#question_panels").selectAll("text").remove();

  
  var question = svg.select("g#question")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", barchartMargin.top + 20)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 5)
      .attr("fill","ivory");
                        
    svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 40)
      .text("Final Question: Get this one right and we'll eliminate all but the top entry!");
    svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 60)
      .text("True or False: When crowds fill the city on Thanksgiving Day, daily arrests increase");
    svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 80)
      .text("significantly.");
  svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", barchartMargin.top + 130)
      .text("Hint: Think back to the analyses in the Results section.");
  
  var q4answers = [{key:1, value:"True"},
                    {key:0, value:"False"}]
    
  var arrestQuestions = svg.select("g#question_panels")
      .selectAll("rect")
      .data(q4answers, d => d.key)
      .enter()
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 10)
      .attr("fill","white")
      .attr("text",d => d.value)
      .attr("key", d=> d.key)
      .on("click", function ()
                    {
                        question5update(d3.select(this).attr("key"))
                        });
                        
    svg.select("g#question_panels")
            .selectAll("text")
      .data(q4answers, d => d.key)
      .enter()
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + (questionWidth - 100)/2)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100 + (questionHeight / 20))
      .text(d => d.value);
            
        };
        
  function gameover(result_data){
          
          // Game is over - only 0 or 1 bar left
          
          svg.select("g#question").selectAll("text").remove();
          svg.select("g#question").selectAll("rect").remove();

          svg.select("g#question_panels").selectAll("rect").remove();
          svg.select("g#question_panels").selectAll("text").remove();
          
          svg.select("g#qTitles").selectAll("text").remove();

  
  var question = svg.select("g#question")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + questionWidth / 2 - 175)
      .attr("y", barchartMargin.top + 30)
      .attr("width", questionWidth - 400)
      .attr("height", questionHeight / 6)
      .attr("fill","lightblue");
                        
    svg.select("g#question")
      .append("text")
      .attr("x", barchartWidth + questionWidth/2 - 100)
      .attr("y", barchartMargin.top + 100)
      .style("font-size", "50px")
      .text("Game Over!");
  
  if(result_data.length == 1){
    
    var result_vals = result_data[0]
    
  var arrestQuestions = svg.select("g#question_panels")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 10 - 10)
      .attr("fill","white")
                        
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", (d, i) => barchartMargin.top + (questionHeight / 20) + 200)
      .style("font-size", "30px")
      .text("You eliminated all but one date.");
      
  svg.select("g#question_panels")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", (d, i) => barchartMargin.top + 220 + questionHeight/10)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 5)
      .attr("fill","white")
                        
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", (d, i) => barchartMargin.top + (questionHeight / 20) + 270)
      .text("Your selection had " + result_vals.arrest_count + " arrests!");
      
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", (d, i) => barchartMargin.top + (questionHeight / 20) + 300)
      .text("Here are some other details about your selection:");
      
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", (d, i) => barchartMargin.top + (questionHeight / 20) + 320)
      .text("Your selected date was: " + result_vals.date + ", ranked number " + result_vals.key);
      
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", (d, i) => barchartMargin.top + (questionHeight / 20) + 340)
      .text("It was a " + result_vals.weekday);
  
  if(result_vals.precip == 0){
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", (d, i) => barchartMargin.top + (questionHeight / 20) + 360)
      .text("There was no precipitation that day, and the average temperature was " + result_vals.temp + "°F");
  }else if(result_vals.precip == 0.001){
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", (d, i) => barchartMargin.top + (questionHeight / 20) + 360)
      .text("There was trace precipitation that day, and the average temperature was " + result_vals.temp + "°F");
  }else{
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", (d, i) => barchartMargin.top + (questionHeight / 20) + 360)
      .text("There was " + result_vals.precip + " inches of precipitation that day, and the average temperature was " + result_vals.temp + "°F");
  }
  // All possibilities eliminated...
        }else{
          var arrestQuestions = svg.select("g#question_panels")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", (d, i) => barchartMargin.top + 200 + i * 100)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 10 - 10)
      .attr("fill","white")
                        
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", (d, i) => barchartMargin.top + (questionHeight / 20) + 200)
      .style("font-size", "30px")
      .text("You eliminated all of the dates...");
          
        }
        
        svg.select("g#question_panels")
      .append("rect")
      .attr("x", barchartWidth + barchartMargin.left + 50)
      .attr("y", h - 200)
      .attr("width", questionWidth - 100)
      .attr("height", questionHeight / 5 - 30)
      .attr("fill","yellow")
                        
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", h - 165)
      .style("font-size", "30px")
      .text("Not satisfied with your result?");
    svg.select("g#question_panels")
      .append("text")
      .attr("x", barchartWidth + barchartMargin.left + 60)
      .attr("y", h - 130)
      .style("font-size", "30px")
      .text("Refresh to try again!");
        };
    </script>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="results.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="conclusion.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Tylermarshall21/NYCArrests/edit/main/06-interactive.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/Tylermarhall21/NYCArrests/blob/main/06-interactive.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
